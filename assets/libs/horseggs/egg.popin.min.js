!function(t){t.fn.popin=function(e){var i=t.extend({speed:250,pos:{}},e),n=function(){i.$el.find(".box").stop().animate({opacity:0,top:i.pos.end},i.speed,function(){i.$el.find(".box").hide().end().find(".overlay").stop().animate({opacity:0},i.speed,function(){i.$el.find(".overlay").hide().end().hide()})})},o=function(){i.$el.show(),i.$el.find(".overlay").show().stop().css({opacity:0}).animate({opacity:1},i.speed).end().find(".box").show().stop().css({opacity:0,top:i.pos.start}).animate({opacity:1,top:i.pos.stop},2*i.speed),i.$el.find(".header, .content").on("click",function(t){t.stopImmediatePropagation()}),i.$el.find(".close, .overlay, .box").on("click",function(t){t.preventDefault(),n()})},s=function(t,e){e&&i.$el.find(".content").css({height:e}),i.$el.show(),i.$el.find(".box").outerHeight(!0)>window.innerHeight&&i.$el.find(".content").css({height:[window.innerHeight-240,"px"].join("")});var n=i.$el.find(".box").outerHeight(!0)/2,o=i.$el.find(".header").outerHeight(!0);window.orientation||window.innerWidth<767?i.$el.find(".content").css({"margin-top":[o,"px"].join("")}):i.$el.find(".box").css({"margin-top":["-",n,"px"].join("")})};return this.on("click",function(e){if(e.preventDefault(),t(this).attr("data-done"))o();else{var n=t(this),a="",d={},l=window.orientation||window.innerWidth<767;d.cols=n.attr("data-cols"),d.height=n.attr("data-height"),d.title=n.attr("data-title"),d.target=n.attr("href"),d.subtitle=n.attr("data-subtitle"),i.id=d.target.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"),l?(i.pos.start="-100%",i.pos.stop=0,i.pos.end="150%"):(i.pos.start="-25%",i.pos.stop="50%",i.pos.end="125%"),d.subtitle=d.subtitle&&!l?["<p>",d.subtitle,"</p>"].join(""):"",d.title&&(a=['<div class="header"><span>',d.title,"</span><p>",d.subtitle,'</p><a href="#" class="close"><span>x</span></a></div>'].join("")),t("body").append(['<div class="pop-in" id="',i.id,'"><div class="overlay"></div><div class="box row"><div class="centered col-',d.cols,'x no-padding">',a,'<div class="content"><div class="scroll"></div></div></div></div></div>'].join("")),i.$el=t(["#",i.id].join("")),0===d.target.indexOf("#")?(i.$el.find(".scroll").append(t(d.target).html()),s(l,d.height),t(window).resize(function(){s(l,d.height)})):i.$el.find(".scroll").load(d.target,function(){s(l,d.height),t(window).resize(function(){s(l,d.height)})}),o(),t(this).attr("data-done",!0)}})}}(jQuery);